# 常见名词记录

## 哨兵变量

用于检查次数的变量

## 自旋

自旋，即不断重试以下操作 

1. 读取新值 
2. 再次比较是否一致，如果一致则写入 
3. 不一致则再次重试整个操作


## 原子操作

原子操作就是不可中断的操作，这些操作对外表现成一个不可分割的整体，他们要么都执行，要么都不执行，外界是看不到原子操作的中间状态。

## 原子性

所谓原子性是指一段代码在执行过程中的「中间过程」中其他线程是感知不到的，对外表现的效果就是要么执行完了，要么没有执行。

在go语言中，atomic包提供了一组函数接口可以保证我们操作的原子性。

## 雪崩

所谓雪崩问题,就是在高访问量、大并发量的情况下缓存失效的情景,此时大量的请求同时涌人数据库中,数据车无法同时承受如此大的查询请求,进而往前影响到网站整体的响应速度。

> 在《深入浅出node.js》给出使用事件队列解决雪崩问题的解决方案。


## 轮叫调度

在node的多进程监听相同端口，默认处理负载均衡的时候是抢占的制度的，抢占就代表着繁忙的时候不去抢占，但是在node中繁忙的可以是io繁忙和cpu繁忙，影响抢占的是cpu繁忙度(不同的业务场景中可能是I/O繁忙,CPU空闲，导致某个请求抢到较多的请求，形成负载不均衡)，为了达到更高的利用率，主进程接受链接，将其依次分发给工作进程。
> 以上来源《深入浅出node.js》
>



## CAS (Compare And Swap)

![cas](/study/imgs/cas.webp)

比较 和 交换 两个操作。  如果先比较，如果一致,则交换。由于每次只是检测是否一致，是否有冲突，所以这是一种基于冲突检测的机制。

注意：CAS是一种思想，既可以在硬件层实现（如CMPXCHG指令），也可以在应用上层实现（如乐观锁）

在比较中，如果发现不一样，一般的补偿机制是自旋，即不断重试以下操作 
1. 读取新值 
2. 再次比较是否一致，如果一致则写入
3. 不一致则再次重试整个操作

目前基于CAS实现的技术非常多，常见的有如下几种
- 乐观锁
- MVCC


CAS的缺点： cpu开销大，ABA问题
CAS的优点： 性能明显高于锁