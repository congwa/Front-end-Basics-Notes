

# å®Œæ•´æ¨¡å‹äº¤äº’è¾“å…¥è¾“å‡ºåˆ†æ

## åœºæ™¯è®¾å®š

```python
messages = [HumanMessage(content="Add 3 and 4.")]
agent.invoke({"messages": messages})
```

---

## å®Œæ•´æ‰§è¡Œæµç¨‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                          â•‘
â•‘                          å®Œæ•´æ¨¡å‹äº¤äº’è¾“å…¥è¾“å‡ºåˆ†æ                                          â•‘
â•‘                                                                                          â•‘
â•‘   ä»»åŠ¡: "Add 3 and 4."                                                                   â•‘
â•‘                                                                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚                          åˆå§‹çŠ¶æ€                                                 â”‚    â•‘
â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â”‚  state = {                                                                       â”‚    â•‘
â•‘  â”‚      "messages": [                                                               â”‚    â•‘
â•‘  â”‚          HumanMessage(content="Add 3 and 4.")                                    â”‚    â•‘
â•‘  â”‚      ],                                                                          â”‚    â•‘
â•‘  â”‚      "llm_calls": undefined (è¿˜æ²¡æœ‰)                                             â”‚    â•‘
â•‘  â”‚  }                                                                               â”‚    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                                                          â•‘
â•‘  START â†’ llm_call                                                                        â•‘
â•‘                                                                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                          â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘  â•‘                  ğŸ”µ ç¬¬ 1 æ¬¡æ¨¡å‹äº¤äº’ (llm_call èŠ‚ç‚¹)                              â•‘    â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘  â”‚  â”‚                        ğŸ“¤ å‘é€ç»™æ¨¡å‹çš„è¾“å…¥                                     â”‚   â•‘
â•‘  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  API è¯·æ±‚:                                                                     â”‚   â•‘
â•‘  â”‚  â”‚  {                                                                             â”‚   â•‘
â•‘  â”‚  â”‚      "model": "claude-sonnet-4-5-20250929",                                    â”‚   â•‘
â•‘  â”‚  â”‚      "temperature": 0,                                                         â”‚   â•‘
â•‘  â”‚  â”‚      "messages": [                                                             â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "role": "system",                                                 â”‚   â•‘
â•‘  â”‚  â”‚              "content": "You are a helpful assistant tasked with              â”‚   â•‘
â•‘  â”‚  â”‚                          performing arithmetic on a set of inputs."           â”‚   â•‘
â•‘  â”‚  â”‚          },                                                                    â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "role": "user",                                                   â”‚   â•‘
â•‘  â”‚  â”‚              "content": "Add 3 and 4."                                         â”‚   â•‘
â•‘  â”‚  â”‚          }                                                                     â”‚   â•‘
â•‘  â”‚  â”‚      ],                                                                        â”‚   â•‘
â•‘  â”‚  â”‚      "tools": [                                                                â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "type": "function",                                               â”‚   â•‘
â•‘  â”‚  â”‚              "function": {                                                     â”‚   â•‘
â•‘  â”‚  â”‚                  "name": "add",                                                â”‚   â•‘
â•‘  â”‚  â”‚                  "description": "Adds `a` and `b`.\n\nArgs:\n    a: First int  â”‚   â•‘
â•‘  â”‚  â”‚                                  \n    b: Second int",                         â”‚   â•‘
â•‘  â”‚  â”‚                  "parameters": {                                               â”‚   â•‘
â•‘  â”‚  â”‚                      "type": "object",                                         â”‚   â•‘
â•‘  â”‚  â”‚                      "properties": {                                           â”‚   â•‘
â•‘  â”‚  â”‚                          "a": {"type": "integer", "description": "First int"}, â”‚   â•‘
â•‘  â”‚  â”‚                          "b": {"type": "integer", "description": "Second int"} â”‚   â•‘
â•‘  â”‚  â”‚                      },                                                        â”‚   â•‘
â•‘  â”‚  â”‚                      "required": ["a", "b"]                                    â”‚   â•‘
â•‘  â”‚  â”‚                  }                                                             â”‚   â•‘
â•‘  â”‚  â”‚              }                                                                 â”‚   â•‘
â•‘  â”‚  â”‚          },                                                                    â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "type": "function",                                               â”‚   â•‘
â•‘  â”‚  â”‚              "function": {                                                     â”‚   â•‘
â•‘  â”‚  â”‚                  "name": "multiply",                                           â”‚   â•‘
â•‘  â”‚  â”‚                  "description": "Multiply `a` and `b`...",                     â”‚   â•‘
â•‘  â”‚  â”‚                  "parameters": {...}                                           â”‚   â•‘
â•‘  â”‚  â”‚              }                                                                 â”‚   â•‘
â•‘  â”‚  â”‚          },                                                                    â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "type": "function",                                               â”‚   â•‘
â•‘  â”‚  â”‚              "function": {                                                     â”‚   â•‘
â•‘  â”‚  â”‚                  "name": "divide",                                             â”‚   â•‘
â•‘  â”‚  â”‚                  "description": "Divide `a` and `b`...",                       â”‚   â•‘
â•‘  â”‚  â”‚                  "parameters": {...}                                           â”‚   â•‘
â•‘  â”‚  â”‚              }                                                                 â”‚   â•‘
â•‘  â”‚  â”‚          }                                                                     â”‚   â•‘
â•‘  â”‚  â”‚      ]                                                                         â”‚   â•‘
â•‘  â”‚  â”‚  }                                                                             â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚                                    â³                                                 â•‘
â•‘  â”‚                              æ¨¡å‹æ€è€ƒä¸­...                                            â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘  â”‚  â”‚                        ğŸ“¥ æ¨¡å‹è¿”å›çš„è¾“å‡º                                       â”‚   â•‘
â•‘  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  API å“åº”:                                                                     â”‚   â•‘
â•‘  â”‚  â”‚  {                                                                             â”‚   â•‘
â•‘  â”‚  â”‚      "id": "msg_xxx",                                                          â”‚   â•‘
â•‘  â”‚  â”‚      "type": "message",                                                        â”‚   â•‘
â•‘  â”‚  â”‚      "role": "assistant",                                                      â”‚   â•‘
â•‘  â”‚  â”‚      "content": [],   â† ç©ºçš„ï¼å› ä¸ºæ¨¡å‹å†³å®šè°ƒç”¨å·¥å…·                              â”‚   â•‘
â•‘  â”‚  â”‚      "tool_use": [                                                             â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "type": "tool_use",                                               â”‚   â•‘
â•‘  â”‚  â”‚              "id": "toolu_01ABC123...",                                        â”‚   â•‘
â•‘  â”‚  â”‚              "name": "add",                                                    â”‚   â•‘
â•‘  â”‚  â”‚              "input": {                                                        â”‚   â•‘
â•‘  â”‚  â”‚                  "a": 3,                                                       â”‚   â•‘
â•‘  â”‚  â”‚                  "b": 4                                                        â”‚   â•‘
â•‘  â”‚  â”‚              }                                                                 â”‚   â•‘
â•‘  â”‚  â”‚          }                                                                     â”‚   â•‘
â•‘  â”‚  â”‚      ]                                                                         â”‚   â•‘
â•‘  â”‚  â”‚  }                                                                             â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  LangChain è½¬æ¢ä¸º:                                                             â”‚   â•‘
â•‘  â”‚  â”‚  AIMessage(                                                                    â”‚   â•‘
â•‘  â”‚  â”‚      content="",                                                               â”‚   â•‘
â•‘  â”‚  â”‚      tool_calls=[                                                              â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "id": "toolu_01ABC123...",                                        â”‚   â•‘
â•‘  â”‚  â”‚              "name": "add",                                                    â”‚   â•‘
â•‘  â”‚  â”‚              "args": {"a": 3, "b": 4}                                          â”‚   â•‘
â•‘  â”‚  â”‚          }                                                                     â”‚   â•‘
â•‘  â”‚  â”‚      ]                                                                         â”‚   â•‘
â•‘  â”‚  â”‚  )                                                                             â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  llm_call èŠ‚ç‚¹è¿”å›:                                                                   â•‘
â•‘  â”‚  {                                                                                    â•‘
â•‘  â”‚      "messages": [AIMessage(tool_calls=[{name: "add", args: {a: 3, b: 4}}])],         â•‘
â•‘  â”‚      "llm_calls": 1                                                                   â•‘
â•‘  â”‚  }                                                                                    â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘                                                                                          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚                          çŠ¶æ€æ›´æ–°å                                               â”‚    â•‘
â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â”‚  state = {                                                                       â”‚    â•‘
â•‘  â”‚      "messages": [                                                               â”‚    â•‘
â•‘  â”‚          HumanMessage(content="Add 3 and 4."),                                   â”‚    â•‘
â•‘  â”‚          AIMessage(content="", tool_calls=[{                      â† æ–°å¢         â”‚    â•‘
â•‘  â”‚              "id": "toolu_01ABC123...",                                          â”‚    â•‘
â•‘  â”‚              "name": "add",                                                      â”‚    â•‘
â•‘  â”‚              "args": {"a": 3, "b": 4}                                            â”‚    â•‘
â•‘  â”‚          }])                                                                     â”‚    â•‘
â•‘  â”‚      ],                                                                          â”‚    â•‘
â•‘  â”‚      "llm_calls": 1                                               â† æ–°å¢         â”‚    â•‘
â•‘  â”‚  }                                                                               â”‚    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                                                          â•‘
â•‘  æ¡ä»¶è¾¹åˆ¤æ–­: should_continue(state)                                                      â•‘
â•‘  â”œâ”€ last_message = AIMessage(tool_calls=[...])                                           â•‘
â•‘  â”œâ”€ last_message.tool_calls ä¸ä¸ºç©º                                                       â•‘
â•‘  â””â”€ è¿”å› "tool_node" âœ…                                                                  â•‘
â•‘                                                                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                          â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘  â•‘                      ğŸŸ¢ å·¥å…·æ‰§è¡Œ (tool_node èŠ‚ç‚¹)                               â•‘    â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘  â”‚  â”‚                        ğŸ”§ å·¥å…·æ‰§è¡Œè¿‡ç¨‹                                         â”‚   â•‘
â•‘  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  è¯»å–æœ€åä¸€æ¡æ¶ˆæ¯çš„ tool_calls:                                                â”‚   â•‘
â•‘  â”‚  â”‚  tool_calls = [{"id": "toolu_01ABC123...", "name": "add", "args": {a:3, b:4}}] â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  éå†æ¯ä¸ª tool_call:                                                           â”‚   â•‘
â•‘  â”‚  â”‚  for tool_call in tool_calls:                                                  â”‚   â•‘
â•‘  â”‚  â”‚      tool = tools_by_name["add"]  â† æ‰¾åˆ° add å‡½æ•°                              â”‚   â•‘
â•‘  â”‚  â”‚      observation = tool.invoke({"a": 3, "b": 4})                               â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  æ‰§è¡Œ add(a=3, b=4):                                                           â”‚   â•‘
â•‘  â”‚  â”‚      def add(a: int, b: int) -> int:                                           â”‚   â•‘
â•‘  â”‚  â”‚          return a + b                                                          â”‚   â•‘
â•‘  â”‚  â”‚      â†’ è¿”å› 7                                                                  â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  åˆ›å»º ToolMessage:                                                             â”‚   â•‘
â•‘  â”‚  â”‚  ToolMessage(                                                                  â”‚   â•‘
â•‘  â”‚  â”‚      content="7",                    â† å·¥å…·è¿”å›å€¼è½¬ä¸ºå­—ç¬¦ä¸²                    â”‚   â•‘
â•‘  â”‚  â”‚      tool_call_id="toolu_01ABC123..."  â† å…³è”åˆ°å¯¹åº”çš„ tool_call                â”‚   â•‘
â•‘  â”‚  â”‚  )                                                                             â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  tool_node èŠ‚ç‚¹è¿”å›:                                                                  â•‘
â•‘  â”‚  {                                                                                    â•‘
â•‘  â”‚      "messages": [ToolMessage(content="7", tool_call_id="toolu_01ABC123...")]         â•‘
â•‘  â”‚  }                                                                                    â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘                                                                                          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚                          çŠ¶æ€æ›´æ–°å                                               â”‚    â•‘
â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â”‚  state = {                                                                       â”‚    â•‘
â•‘  â”‚      "messages": [                                                               â”‚    â•‘
â•‘  â”‚          HumanMessage(content="Add 3 and 4."),                                   â”‚    â•‘
â•‘  â”‚          AIMessage(content="", tool_calls=[{name: "add", args: {a:3, b:4}}]),    â”‚    â•‘
â•‘  â”‚          ToolMessage(content="7", tool_call_id="toolu_01ABC123...")  â† æ–°å¢      â”‚    â•‘
â•‘  â”‚      ],                                                                          â”‚    â•‘
â•‘  â”‚      "llm_calls": 1                                                              â”‚    â•‘
â•‘  â”‚  }                                                                               â”‚    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                                                          â•‘
â•‘  tool_node â†’ llm_call (æ— æ¡ä»¶è¾¹)                                                         â•‘
â•‘                                                                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                          â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘  â•‘                  ğŸ”µ ç¬¬ 2 æ¬¡æ¨¡å‹äº¤äº’ (llm_call èŠ‚ç‚¹)                              â•‘    â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘  â”‚  â”‚                        ğŸ“¤ å‘é€ç»™æ¨¡å‹çš„è¾“å…¥                                     â”‚   â•‘
â•‘  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  API è¯·æ±‚:                                                                     â”‚   â•‘
â•‘  â”‚  â”‚  {                                                                             â”‚   â•‘
â•‘  â”‚  â”‚      "model": "claude-sonnet-4-5-20250929",                                    â”‚   â•‘
â•‘  â”‚  â”‚      "temperature": 0,                                                         â”‚   â•‘
â•‘  â”‚  â”‚      "messages": [                                                             â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "role": "system",                                                 â”‚   â•‘
â•‘  â”‚  â”‚              "content": "You are a helpful assistant tasked with              â”‚   â•‘
â•‘  â”‚  â”‚                          performing arithmetic on a set of inputs."           â”‚   â•‘
â•‘  â”‚  â”‚          },                                                                    â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "role": "user",                                                   â”‚   â•‘
â•‘  â”‚  â”‚              "content": "Add 3 and 4."                                         â”‚   â•‘
â•‘  â”‚  â”‚          },                                                                    â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "role": "assistant",                          â† AI ä¹‹å‰çš„å›å¤     â”‚   â•‘
â•‘  â”‚  â”‚              "content": "",                                                    â”‚   â•‘
â•‘  â”‚  â”‚              "tool_use": [                                                     â”‚   â•‘
â•‘  â”‚  â”‚                  {                                                             â”‚   â•‘
â•‘  â”‚  â”‚                      "type": "tool_use",                                       â”‚   â•‘
â•‘  â”‚  â”‚                      "id": "toolu_01ABC123...",                                â”‚   â•‘
â•‘  â”‚  â”‚                      "name": "add",                                            â”‚   â•‘
â•‘  â”‚  â”‚                      "input": {"a": 3, "b": 4}                                 â”‚   â•‘
â•‘  â”‚  â”‚                  }                                                             â”‚   â•‘
â•‘  â”‚  â”‚              ]                                                                 â”‚   â•‘
â•‘  â”‚  â”‚          },                                                                    â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "role": "tool",                                â† å·¥å…·æ‰§è¡Œç»“æœ     â”‚   â•‘
â•‘  â”‚  â”‚              "tool_use_id": "toolu_01ABC123...",                               â”‚   â•‘
â•‘  â”‚  â”‚              "content": "7"                                                    â”‚   â•‘
â•‘  â”‚  â”‚          }                                                                     â”‚   â•‘
â•‘  â”‚  â”‚      ],                                                                        â”‚   â•‘
â•‘  â”‚  â”‚      "tools": [... åŒä¸Š ...]                                                   â”‚   â•‘
â•‘  â”‚  â”‚  }                                                                             â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  ğŸ” æ³¨æ„ï¼šè¿™æ¬¡çš„ messages åŒ…å«äº†å®Œæ•´çš„å¯¹è¯å†å²ï¼                               â”‚   â•‘
â•‘  â”‚  â”‚     - ç”¨æˆ·æ¶ˆæ¯                                                                 â”‚   â•‘
â•‘  â”‚  â”‚     - AI çš„å·¥å…·è°ƒç”¨è¯·æ±‚                                                        â”‚   â•‘
â•‘  â”‚  â”‚     - å·¥å…·æ‰§è¡Œç»“æœ                                                             â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚                                    â³                                                 â•‘
â•‘  â”‚                              æ¨¡å‹æ€è€ƒä¸­...                                            â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  ğŸ¤– æ¨¡å‹æ€è€ƒï¼š                                                                        â•‘
â•‘  â”‚  "æˆ‘è°ƒç”¨äº† add(3, 4)ï¼Œå·¥å…·è¿”å›äº† 7ï¼Œ                                                  â•‘
â•‘  â”‚   è¿™å°±æ˜¯ç­”æ¡ˆï¼Œæˆ‘ç°åœ¨å¯ä»¥å›å¤ç”¨æˆ·äº†"                                                   â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘  â”‚  â”‚                        ğŸ“¥ æ¨¡å‹è¿”å›çš„è¾“å‡º                                       â”‚   â•‘
â•‘  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  API å“åº”:                                                                     â”‚   â•‘
â•‘  â”‚  â”‚  {                                                                             â”‚   â•‘
â•‘  â”‚  â”‚      "id": "msg_yyy",                                                          â”‚   â•‘
â•‘  â”‚  â”‚      "type": "message",                                                        â”‚   â•‘
â•‘  â”‚  â”‚      "role": "assistant",                                                      â”‚   â•‘
â•‘  â”‚  â”‚      "content": [                                                              â”‚   â•‘
â•‘  â”‚  â”‚          {                                                                     â”‚   â•‘
â•‘  â”‚  â”‚              "type": "text",                                                   â”‚   â•‘
â•‘  â”‚  â”‚              "text": "The sum of 3 and 4 is 7."                                â”‚   â•‘
â•‘  â”‚  â”‚          }                                                                     â”‚   â•‘
â•‘  â”‚  â”‚      ],                                                                        â”‚   â•‘
â•‘  â”‚  â”‚      "tool_use": []   â† ç©ºçš„ï¼æ²¡æœ‰å·¥å…·è°ƒç”¨                                     â”‚   â•‘
â•‘  â”‚  â”‚  }                                                                             â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â”‚  LangChain è½¬æ¢ä¸º:                                                             â”‚   â•‘
â•‘  â”‚  â”‚  AIMessage(                                                                    â”‚   â•‘
â•‘  â”‚  â”‚      content="The sum of 3 and 4 is 7.",                                       â”‚   â•‘
â•‘  â”‚  â”‚      tool_calls=[]  â† ç©ºçš„ï¼                                                   â”‚   â•‘
â•‘  â”‚  â”‚  )                                                                             â”‚   â•‘
â•‘  â”‚  â”‚                                                                                â”‚   â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â”‚  llm_call èŠ‚ç‚¹è¿”å›:                                                                   â•‘
â•‘  â”‚  {                                                                                    â•‘
â•‘  â”‚      "messages": [AIMessage(content="The sum of 3 and 4 is 7.")],                     â•‘
â•‘  â”‚      "llm_calls": 2                                                                   â•‘
â•‘  â”‚  }                                                                                    â•‘
â•‘  â”‚                                                                                       â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘                                                                                          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚                          çŠ¶æ€æ›´æ–°å                                               â”‚    â•‘
â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â”‚  state = {                                                                       â”‚    â•‘
â•‘  â”‚      "messages": [                                                               â”‚    â•‘
â•‘  â”‚          HumanMessage(content="Add 3 and 4."),                                   â”‚    â•‘
â•‘  â”‚          AIMessage(content="", tool_calls=[{name: "add", args: {a:3, b:4}}]),    â”‚    â•‘
â•‘  â”‚          ToolMessage(content="7", tool_call_id="toolu_01ABC123..."),             â”‚    â•‘
â•‘  â”‚          AIMessage(content="The sum of 3 and 4 is 7.")          â† æ–°å¢           â”‚    â•‘
â•‘  â”‚      ],                                                                          â”‚    â•‘
â•‘  â”‚      "llm_calls": 2                                             â† æ›´æ–°           â”‚    â•‘
â•‘  â”‚  }                                                                               â”‚    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                                                          â•‘
â•‘  æ¡ä»¶è¾¹åˆ¤æ–­: should_continue(state)                                                      â•‘
â•‘  â”œâ”€ last_message = AIMessage(content="The sum of 3 and 4 is 7.")                         â•‘
â•‘  â”œâ”€ last_message.tool_calls = []  â† ç©ºçš„ï¼                                               â•‘
â•‘  â””â”€ è¿”å› END âœ…                                                                          â•‘
â•‘                                                                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚                          æœ€ç»ˆè¾“å‡º                                                 â”‚    â•‘
â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â”‚  agent.invoke() è¿”å›:                                                            â”‚    â•‘
â•‘  â”‚  {                                                                               â”‚    â•‘
â•‘  â”‚      "messages": [                                                               â”‚    â•‘
â•‘  â”‚          HumanMessage(content="Add 3 and 4."),                                   â”‚    â•‘
â•‘  â”‚          AIMessage(content="", tool_calls=[{name: "add", args: {a:3, b:4}}]),    â”‚    â•‘
â•‘  â”‚          ToolMessage(content="7", tool_call_id="..."),                           â”‚    â•‘
â•‘  â”‚          AIMessage(content="The sum of 3 and 4 is 7.")                           â”‚    â•‘
â•‘  â”‚      ],                                                                          â”‚    â•‘
â•‘  â”‚      "llm_calls": 2                                                              â”‚    â•‘
â•‘  â”‚  }                                                                               â”‚    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â”‚  pretty_print() è¾“å‡º:                                                            â”‚    â•‘
â•‘  â”‚  ================================ Human Message =================================â”‚    â•‘
â•‘  â”‚  Add 3 and 4.                                                                    â”‚    â•‘
â•‘  â”‚  ================================== Ai Message ==================================â”‚    â•‘
â•‘  â”‚  Tool Calls:                                                                     â”‚    â•‘
â•‘  â”‚    add (toolu_01ABC123...)                                                       â”‚    â•‘
â•‘  â”‚   Call ID: toolu_01ABC123...                                                     â”‚    â•‘
â•‘  â”‚    Args:                                                                         â”‚    â•‘
â•‘  â”‚      a: 3                                                                        â”‚    â•‘
â•‘  â”‚      b: 4                                                                        â”‚    â•‘
â•‘  â”‚  ================================= Tool Message =================================â”‚    â•‘
â•‘  â”‚  Name: add                                                                       â”‚    â•‘
â•‘  â”‚  7                                                                               â”‚    â•‘
â•‘  â”‚  ================================== Ai Message ==================================â”‚    â•‘
â•‘  â”‚  The sum of 3 and 4 is 7.                                                        â”‚    â•‘
â•‘  â”‚                                                                                  â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ç»Ÿè®¡æ±‡æ€»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                     â”‚
â”‚                              æ‰§è¡Œç»Ÿè®¡                                                â”‚
â”‚                                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚  ğŸ”µ æ¨¡å‹äº¤äº’æ¬¡æ•°:      2 æ¬¡                                                          â”‚
â”‚                                                                                     â”‚
â”‚  ğŸ“Š ç¬¬ 1 æ¬¡æ¨¡å‹äº¤äº’:                                                                 â”‚
â”‚     è¾“å…¥æ¶ˆæ¯æ•°:    2 æ¡ (1 system + 1 human)                                         â”‚
â”‚     è¾“å‡º:          AIMessage(tool_calls=[add])                                       â”‚
â”‚     å†³ç­–:          è°ƒç”¨ add å·¥å…·                                                     â”‚
â”‚                                                                                     â”‚
â”‚  ğŸ“Š ç¬¬ 2 æ¬¡æ¨¡å‹äº¤äº’:                                                                 â”‚
â”‚     è¾“å…¥æ¶ˆæ¯æ•°:    4 æ¡ (1 system + 1 human + 1 assistant + 1 tool)                  â”‚
â”‚     è¾“å‡º:          AIMessage(content="The sum of 3 and 4 is 7.")                     â”‚
â”‚     å†³ç­–:          ç›´æ¥å›å¤ç”¨æˆ·                                                      â”‚
â”‚                                                                                     â”‚
â”‚  ğŸŸ¢ å·¥å…·æ‰§è¡Œæ¬¡æ•°:      1 æ¬¡                                                          â”‚
â”‚     å·¥å…·å:        add                                                               â”‚
â”‚     å‚æ•°:          {a: 3, b: 4}                                                      â”‚
â”‚     ç»“æœ:          7                                                                 â”‚
â”‚                                                                                     â”‚
â”‚  ğŸ“ æœ€ç»ˆæ¶ˆæ¯åˆ—è¡¨:                                                                    â”‚
â”‚     1. HumanMessage("Add 3 and 4.")                                                 â”‚
â”‚     2. AIMessage(tool_calls=[add(3,4)])                                              â”‚
â”‚     3. ToolMessage("7")                                                              â”‚
â”‚     4. AIMessage("The sum of 3 and 4 is 7.")                                         â”‚
â”‚                                                                                     â”‚
â”‚  ğŸ“ˆ llm_calls çŠ¶æ€:    2                                                             â”‚
â”‚                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å›¾å½¢åŒ–æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                     â”‚
â”‚                              æ‰§è¡Œæµç¨‹å›¾                                              â”‚
â”‚                                                                                     â”‚
â”‚   START                                                                             â”‚
â”‚     â”‚                                                                               â”‚
â”‚     â–¼                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         llm_call #1                                         â”‚   â”‚
â”‚   â”‚   è¾“å…¥: [System, Human("Add 3 and 4.")]                                     â”‚   â”‚
â”‚   â”‚   è¾“å‡º: AIMessage(tool_calls=[add(3,4)])                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚     â”‚                                                                               â”‚
â”‚     â”‚ should_continue: tool_calls ä¸ä¸ºç©º â†’ "tool_node"                             â”‚
â”‚     â–¼                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         tool_node                                           â”‚   â”‚
â”‚   â”‚   æ‰§è¡Œ: add(a=3, b=4) â†’ 7                                                   â”‚   â”‚
â”‚   â”‚   è¾“å‡º: ToolMessage(content="7")                                            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚     â”‚                                                                               â”‚
â”‚     â”‚ æ— æ¡ä»¶è¾¹ â†’ llm_call                                                          â”‚
â”‚     â–¼                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         llm_call #2                                         â”‚   â”‚
â”‚   â”‚   è¾“å…¥: [System, Human, AI(tool_calls), Tool("7")]                          â”‚   â”‚
â”‚   â”‚   è¾“å‡º: AIMessage("The sum of 3 and 4 is 7.")                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚     â”‚                                                                               â”‚
â”‚     â”‚ should_continue: tool_calls ä¸ºç©º â†’ END                                       â”‚
â”‚     â–¼                                                                               â”‚
â”‚   END                                                                               â”‚
â”‚                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
