# http3.0

在2022年发布， 第一次基于传输层UDP实现，由谷歌主导，在chrome首先实现

udp用户数据报文协议，使用quic协议保证应用层的可靠

web3.0的时代

基于quic协议的升级版本： http3.0 = http2.0 + quic

既然动不了tcp，就抛弃tcp吧。

在应用程序层使用了udp协议，并保证数据传输的可靠性。推出了基于udp的quic协议。 可以说她就是tcp2.0，在应用程序层实现的。


quic实现了tcp的可靠性、拥塞控制、流量控制、排序等功能并且保留了基于流的http2的多路复用及http2优化的其他功能。



## 3和2流处理区别

1. http3动态标头编码使用QPACK,QPACK增加了动态标头表中的条目到98个，有独立指令流。
2. 解决HPACK按顺序解码容易造成线头阻塞问题，使用指令独立流，提前将需要增加的标头使用添加指令发送给解码方。解码方收到后回复确认标头指令，从而利用标头动态表中标头项的状态，来确认标头是否完成同步。标头项状态未被确认的，请求的数据流就不会使用该标头的索引编码标头，已解决动态标头塞车问题
3. quic协议实现了tcp协议的所有功能，quic如何规避tcp线头阻塞的缺点?
   在http3中在帧中增加了 offet字节范围 length： 可以对帧识别，相同的包可以组成一个消息。这样丢了一个数据包数据包，也不影响其它的消息。清除了http2的线头阻塞的缺点。





## http3的三个优点。

1. http2使用tcp协议需要20-60个字节的头部，http3使用udp协议，http头部只需要8个字节
2. 0往返时间建立连接，就是0RTT. 没有3次握手和4次挥手的，也是需要加密传输。 需要1RTT.相对于http2.0的加密传输来讲，还是少了1RTT时间
  
3. 怎么识别当前连接并且实现多路复用的。

    tcp通过 源ip  源端口 目标IP 目标端口的4元组来确认连接

    quic使用随机数作为connectionID,来识别客户端和同域名服务器建立的连接。从而不受网络变化的影响，通过connection id 确定了链接，就可以实现和http2一样的双向流多路复用功能。非常适合移动互联网。

[为什么 QUIC 优于 TCP？（](https://engineeringatscale.substack.com/p/how-quic-is-displacing-tcp-for-speed)
