# knip - æœªä½¿ç”¨çš„åŒ…ç®¡ç†

### **1. å®‰è£… `knip`**
å› ä¸ºä½ ä½¿ç”¨çš„æ˜¯ `pnpm`ï¼Œå»ºè®®ä½œä¸º **å¼€å‘ä¾èµ–** å®‰è£…ï¼š
```sh
pnpm add -D knip
```

---

### **2. è¿è¡Œ `knip`**
é»˜è®¤æƒ…å†µä¸‹ï¼Œç›´æ¥è¿è¡Œï¼š
```sh
pnpm knip
```
å®ƒä¼šè‡ªåŠ¨æ£€æµ‹ï¼š
- **æœªä½¿ç”¨çš„å¯¼å‡º**ï¼ˆå¦‚æœªè¢«è°ƒç”¨çš„å‡½æ•°ã€å˜é‡ï¼‰
- **æœªä½¿ç”¨çš„æ–‡ä»¶**ï¼ˆå¦‚æ•´ä¸ªé¡¹ç›®é‡Œæ²¡æœ‰è¢«å¼•ç”¨çš„æ–‡ä»¶ï¼‰
- **æœªä½¿ç”¨çš„ä¾èµ–**ï¼ˆå¦‚ `package.json` é‡Œå®‰è£…äº†ä½†æœªè¢«ä½¿ç”¨çš„ npm åŒ…ï¼‰

**ç¤ºä¾‹è¾“å‡º**
```sh
Unused files
 â”œâ”€ src/oldComponent.ts
 â”œâ”€ utils/unusedHelper.ts
```

---

### **3. é…ç½® `knip.config.json`ï¼ˆå¯é€‰ï¼‰**
å¦‚æœä½ æƒ³è¦è‡ªå®šä¹‰è§„åˆ™ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `knip.config.json`ï¼š
```json
{
  "entry": ["src/index.ts"],
  "ignore": ["src/types/*.d.ts"],
  "ignoreDependencies": ["eslint", "prettier"]
}
```
- `entry`ï¼šæŒ‡å®šé¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼ˆé»˜è®¤ä¸º `package.json` é‡Œçš„ `main`ï¼‰
- `ignore`ï¼šå¿½ç•¥æŸäº›æ–‡ä»¶
- `ignoreDependencies`ï¼šä¸æ£€æµ‹æŸäº›ä¾èµ–æ˜¯å¦æœªä½¿ç”¨ï¼ˆå¦‚ `eslint`ã€`prettier`ï¼‰

---

### **4. ç»“åˆ `package.json` çš„ `scripts`ï¼ˆæ¨èï¼‰**
å¯ä»¥åœ¨ `package.json` é‡ŒåŠ ä¸ª `script`ï¼š
```json
"scripts": {
  "check-unused": "knip"
}
```
ç„¶åä½ å¯ä»¥ç›´æ¥è¿è¡Œï¼š
```sh
pnpm check-unused
```

---

### **5. åˆ é™¤æœªä½¿ç”¨çš„æ–‡ä»¶ & ä¾èµ–**
å¦‚æœ `knip` å‘ç°äº†æœªä½¿ç”¨çš„æ–‡ä»¶æˆ– npm ä¾èµ–ï¼š
- **åˆ é™¤æœªä½¿ç”¨çš„æ–‡ä»¶**ï¼š
  ```sh
  rm -rf src/oldComponent.ts utils/unusedHelper.ts
  ```
- **ç§»é™¤æœªä½¿ç”¨çš„ npm ä¾èµ–**ï¼š
  ```sh
  pnpm remove <package_name>
  ```

ä½ å¯ä»¥å…ˆè¿è¡Œ `pnpm knip` çœ‹çœ‹ `accompany` é‡Œæœ‰å¤šå°‘æœªä½¿ç”¨çš„ä»£ç å’Œä¾èµ–ï¼Œç„¶åå†å†³å®šæ˜¯å¦è¦åˆ æ‰ã€‚ğŸš€